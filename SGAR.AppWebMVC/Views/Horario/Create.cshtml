@model SGAR.AppWebMVC.Models.Horario

@{
    ViewData["Title"] = "Crear Horario";
}

<h1>@ViewData["Title"]</h1>

<form asp-action="Create" method="post">
    <div class="form-group">
        <label asp-for="HoraEntrada" class="control-label required"></label>
        <input asp-for="HoraEntrada" type="time" class="form-control" />
        <span asp-validation-for="HoraEntrada" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="HoraSalida" class="control-label required"></label>
        <input asp-for="HoraSalida" type="time" class="form-control" />
        <span asp-validation-for="HoraSalida" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label class="required">Días de la semana:</label>
        <div class="checkbox-group">
            <label><input type="checkbox" name="DiasSeleccionados" value="0" /> Lunes</label>
            <label><input type="checkbox" name="DiasSeleccionados" value="1" /> Martes</label>
            <label><input type="checkbox" name="DiasSeleccionados" value="2" /> Miércoles</label>
            <label><input type="checkbox" name="DiasSeleccionados" value="3" /> Jueves</label>
            <label><input type="checkbox" name="DiasSeleccionados" value="4" /> Viernes</label>
            <label><input type="checkbox" name="DiasSeleccionados" value="5" /> Sábado</label>
            <label><input type="checkbox" name="DiasSeleccionados" value="6" /> Domingo</label>
        </div>
    </div>


    <div class="form-group">
        <label asp-for="Turno" class="control-label"></label>
        <select asp-for="Turno" class="form-control">
            <option value="1">Matutino</option>
            <option value="2">Vespertino</option>
        </select>
    </div>

    <div class="form-group">
        <label asp-for="IdOperador" class="control-label required"></label>
        <select asp-for="IdOperador" class="form-control combo" asp-items="ViewBag.Operadores"></select>
    </div>

    <div class="form-group">
        <label for="IdDistrito">Distrito</label>
        <select id="idDistrito" name="IdDistrito" class="form-control combo" asp-items="ViewBag.Distritos"></select>
    </div>

    <div class="form-group">
        <label for="IdZona" class="required">Zona</label>
        <select id="zonas" name="IdZona" asp-for="IdZona" asp-items="ViewBag.Distritos" class="form-control combo"></select>
    </div>

    <button type="submit" class="btn btn-primary">Guardar</button>
</form>

@section Scripts {
    <script>
        $(document).ready(function() {
            $('#idDistrito').change(function() {
                var distritoId = $(this).val();
                if (distritoId) {
                    $.ajax({
                        url: '/Horario/GetZonas',
                        data: { idDistrito: distritoId },
                        success: function(data) {
                            var zonaSelect = $('#zonas');
                            zonaSelect.empty();
                            zonaSelect.append('<option value="">Seleccione una zona</option>');
                            $.each(data, function(index, zona) {
                                zonaSelect.append('<option value="' + zona.id + '">' + zona.nombre + '</option>');
                            });
                        }
                    });
                } else {
                    $('#zonas').empty();
                    $('#zonas').append('<option value="">Seleccione una zona</option>');
                }
            });
        });
    </script>
}
